{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Andy/Documents/GitHub/Stranger Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Andy/Documents/GitHub/Stranger Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Andy/Documents/GitHub/Stranger Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useParams}from'react-router-dom';import{createMessage}from'../api/api';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SendMessage=function SendMessage(_ref){var postID=_ref.postID,token=_ref.token;var _useState=useState({content:''}),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var navigate=useNavigate();function addMessage(){return _addMessage.apply(this,arguments);}function _addMessage(){_addMessage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return createMessage({postID:postID,message:message,token:token});case 2:case\"end\":return _context.stop();}}},_callee);}));return _addMessage.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(event){event.preventDefault();if(token!=''){addMessage();console.log('message has been sent');window.alert('Message has been sent to user, now redirecting back to all posts.');setMessage({content:''});navigate('/posts');}else{window.confirm('Sorry you need to be logged in to send a message. Click Yes to be redirected to the login screen');navigate('/login');}},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter Message\",onChange:function onChange(event){return setMessage({content:event.target.value});}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Send Message\"})]});};var SinglePost=function SinglePost(_ref2){var posts=_ref2.posts,token=_ref2.token;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),activateMessage=_useState4[0],setActivateMessage=_useState4[1];var _useParams=useParams(),postID=_useParams.postID;var _posts$filter=posts.filter(function(post){return post._id===postID;}),_posts$filter2=_slicedToArray(_posts$filter,1),currentPost=_posts$filter2[0];var title=currentPost.title,description=currentPost.description,location=currentPost.location,price=currentPost.price,willDeliver=currentPost.willDeliver,_id=currentPost._id;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:title}),/*#__PURE__*/_jsxs(\"p\",{children:[\" Description: \",description]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" Location: \",location]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" Price: \",price]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" willDeliver: \",willDeliver,\" \"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setActivateMessage(!activateMessage);},children:\"Message this user\"}),activateMessage&&/*#__PURE__*/_jsx(SendMessage,{postID:postID,token:token})]});};export default SinglePost;","map":{"version":3,"names":["React","useState","useParams","createMessage","useNavigate","SendMessage","postID","token","content","message","setMessage","navigate","addMessage","event","preventDefault","console","log","window","alert","confirm","target","value","SinglePost","posts","activateMessage","setActivateMessage","filter","post","_id","currentPost","title","description","location","price","willDeliver"],"sources":["C:/Users/Andy/Documents/GitHub/Stranger Things/src/components/SinglePost.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { createMessage } from '../api/api';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n\r\nconst SendMessage = ({ postID, token }) => {\r\n    const [message, setMessage] = useState({ content: '' });\r\n    const navigate= useNavigate();\r\n    async function addMessage() {\r\n        await createMessage({ postID, message, token })\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={(event) => {\r\n            event.preventDefault();\r\n            if (token != ''){\r\n            addMessage();\r\n            console.log('message has been sent');\r\n            window.alert('Message has been sent to user, now redirecting back to all posts.');\r\n            setMessage({content:''})\r\n            navigate('/posts');\r\n            } else {\r\n                window.confirm('Sorry you need to be logged in to send a message. Click Yes to be redirected to the login screen');\r\n                navigate('/login')\r\n            }\r\n        }}>\r\n            <input\r\n                type='text'\r\n                placeholder='Enter Message'\r\n                onChange={(event) => setMessage({ content: event.target.value })}\r\n            />\r\n            <button type='submit'>Send Message</button>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst SinglePost = ({ posts, token }) => {\r\n    const [activateMessage, setActivateMessage] = useState(false);\r\n\r\n    const { postID } = useParams();\r\n\r\n    const [currentPost] = posts.filter(post => post._id === postID);\r\n\r\n    const { title, description, location, price, willDeliver, _id } = currentPost;\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                <h3>{title}</h3>\r\n                <p> Description: {description}</p>\r\n                <p> Location: {location}</p>\r\n                <p> Price: {price}</p>\r\n                <p> willDeliver: {willDeliver} </p>\r\n            </div>\r\n            <button onClick={() => setActivateMessage(!activateMessage)}>Message this user</button>\r\n            {\r\n                activateMessage && <SendMessage postID={postID} token={token} />\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SinglePost;"],"mappings":"4ZAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,OAASC,aAAa,KAAQ,YAAY,CAC1C,OAASC,WAAW,KAAQ,kBAAkB,CAAC,wFAG/C,GAAMC,YAAW,CAAG,QAAdA,YAAW,MAA0B,IAApBC,OAAM,MAANA,MAAM,CAAEC,KAAK,MAALA,KAAK,CAChC,cAA8BN,QAAQ,CAAC,CAAEO,OAAO,CAAE,EAAG,CAAC,CAAC,wCAAhDC,OAAO,eAAEC,UAAU,eAC1B,GAAMC,SAAQ,CAAEP,WAAW,EAAE,CAAC,QACfQ,WAAU,0IAAzB,2JACUT,cAAa,CAAC,CAAEG,MAAM,CAANA,MAAM,CAAEG,OAAO,CAAPA,OAAO,CAAEF,KAAK,CAALA,KAAM,CAAC,CAAC,uDAClD,6CAED,mBACI,cAAM,QAAQ,CAAE,kBAACM,KAAK,CAAK,CACvBA,KAAK,CAACC,cAAc,EAAE,CACtB,GAAIP,KAAK,EAAI,EAAE,CAAC,CAChBK,UAAU,EAAE,CACZG,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC,CACpCC,MAAM,CAACC,KAAK,CAAC,mEAAmE,CAAC,CACjFR,UAAU,CAAC,CAACF,OAAO,CAAC,EAAE,CAAC,CAAC,CACxBG,QAAQ,CAAC,QAAQ,CAAC,CAClB,CAAC,IAAM,CACHM,MAAM,CAACE,OAAO,CAAC,kGAAkG,CAAC,CAClHR,QAAQ,CAAC,QAAQ,CAAC,CACtB,CACJ,CAAE,wBACE,cACI,IAAI,CAAC,MAAM,CACX,WAAW,CAAC,eAAe,CAC3B,QAAQ,CAAE,kBAACE,KAAK,QAAKH,WAAU,CAAC,CAAEF,OAAO,CAAEK,KAAK,CAACO,MAAM,CAACC,KAAM,CAAC,CAAC,EAAC,EACnE,cACF,eAAQ,IAAI,CAAC,QAAQ,0BAAsB,GACxC,CAEf,CAAC,CAED,GAAMC,WAAU,CAAG,QAAbA,WAAU,OAAyB,IAAnBC,MAAK,OAALA,KAAK,CAAEhB,KAAK,OAALA,KAAK,CAC9B,eAA8CN,QAAQ,CAAC,KAAK,CAAC,yCAAtDuB,eAAe,eAAEC,kBAAkB,eAE1C,eAAmBvB,SAAS,EAAE,CAAtBI,MAAM,YAANA,MAAM,CAEd,kBAAsBiB,KAAK,CAACG,MAAM,CAAC,SAAAC,IAAI,QAAIA,KAAI,CAACC,GAAG,GAAKtB,MAAM,GAAC,gDAAxDuB,WAAW,mBAElB,GAAQC,MAAK,CAAqDD,WAAW,CAArEC,KAAK,CAAEC,WAAW,CAAwCF,WAAW,CAA9DE,WAAW,CAAEC,QAAQ,CAA8BH,WAAW,CAAjDG,QAAQ,CAAEC,KAAK,CAAuBJ,WAAW,CAAvCI,KAAK,CAAEC,WAAW,CAAUL,WAAW,CAAhCK,WAAW,CAAEN,GAAG,CAAKC,WAAW,CAAnBD,GAAG,CAE7D,mBACI,oCACI,oCACI,oBAAKE,KAAK,EAAM,cAChB,sCAAkBC,WAAW,GAAK,cAClC,mCAAeC,QAAQ,GAAK,cAC5B,gCAAYC,KAAK,GAAK,cACtB,sCAAkBC,WAAW,OAAM,GACjC,cACN,eAAQ,OAAO,CAAE,yBAAMT,mBAAkB,CAAC,CAACD,eAAe,CAAC,EAAC,+BAA2B,CAEnFA,eAAe,eAAI,KAAC,WAAW,EAAC,MAAM,CAAElB,MAAO,CAAC,KAAK,CAAEC,KAAM,EAAG,GAElE,CAEd,CAAC,CAED,cAAee,WAAU"},"metadata":{},"sourceType":"module"}