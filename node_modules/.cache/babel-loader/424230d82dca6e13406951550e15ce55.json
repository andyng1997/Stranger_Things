{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Andy/Documents/GitHub/Stranger Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Andy/Documents/GitHub/Stranger Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Andy/Documents/GitHub/Stranger Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Link}from'react-router-dom';import{deletePost}from'../api/api';import Search from'./Search';import{Button}from'semantic-ui-react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Posts=function Posts(_ref){var posts=_ref.posts,token=_ref.token;var _useState=useState(posts),_useState2=_slicedToArray(_useState,2),filteredPosts=_useState2[0],setFilteredPosts=_useState2[1];var deletePostConfirm=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(token,postIdToDelete){var deleted;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:window.confirm('Are you sure you want to delete this post?');_context.next=3;return deletePost(token,postIdToDelete);case 3:deleted=_context.sent;window.alert('Post has been successfully deleted.');return _context.abrupt(\"return\",deleted);case 6:case\"end\":return _context.stop();}}},_callee);}));return function deletePostConfirm(_x,_x2){return _ref2.apply(this,arguments);};}();//ask for help updating state on post after creating post and deleting post.\n//I promise create and delete post works it just will not update the state for some reason...\nreturn/*#__PURE__*/_jsxs(\"div\",{id:\"outer div element\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Items For Sale\"}),/*#__PURE__*/_jsx(Search,{posts:posts,setFilteredPosts:setFilteredPosts})]}),Array.isArray(posts)&&filteredPosts.map(function(post){var description=post.description,location=post.location,price=post.price,title=post.title,_id=post._id,isAuthor=post.isAuthor;return/*#__PURE__*/_jsxs(\"div\",{class:\"ui basic segment\",id:\"posts\",children:[/*#__PURE__*/_jsx(\"h2\",{class:\"ui header\",children:title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Description: \",description]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: \",price]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Location: \",location]}),isAuthor?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{children:/*#__PURE__*/_jsx(Link,{to:\"/posts/edit-post/\".concat(_id),children:\"Edit\"})}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(event){deletePostConfirm(token,_id);},children:\"Delete Post\"})]}):/*#__PURE__*/_jsx(Button,{children:/*#__PURE__*/_jsx(Link,{to:\"/posts/\".concat(_id),children:\"View Post\"})})]},_id);})]});};export default Posts;","map":{"version":3,"names":["React","useState","Link","deletePost","Search","Button","Posts","posts","token","filteredPosts","setFilteredPosts","deletePostConfirm","postIdToDelete","window","confirm","deleted","alert","Array","isArray","map","post","description","location","price","title","_id","isAuthor","event"],"sources":["C:/Users/Andy/Documents/GitHub/Stranger Things/src/components/Posts.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { deletePost } from '../api/api';\r\nimport Search from './Search';\r\nimport { Button } from 'semantic-ui-react'\r\n\r\nconst Posts = ({ posts, token }) => { \r\n    const [filteredPosts, setFilteredPosts] = useState(posts);\r\n\r\n    const deletePostConfirm = async (token, postIdToDelete ) => {\r\n        window.confirm('Are you sure you want to delete this post?');\r\n        const deleted = await deletePost(token, postIdToDelete);\r\n        window.alert('Post has been successfully deleted.');\r\n        return deleted;\r\n    }\r\n//ask for help updating state on post after creating post and deleting post.\r\n//I promise create and delete post works it just will not update the state for some reason...\r\n    return (\r\n        <div id=\"outer div element\"> \r\n            <div>\r\n                <h1>Items For Sale</h1>\r\n                <Search posts= {posts} setFilteredPosts= {setFilteredPosts}></Search>\r\n            </div>    \r\n            { \r\n            Array.isArray(posts) && \r\n                filteredPosts.map((post) => {\r\n                    const { description, location, price, title, _id, isAuthor } = post;\r\n                    return (\r\n                        <div key={_id} class=\"ui basic segment\" id=\"posts\">\r\n                            <h2 class=\"ui header\">{title}</h2>\r\n                            <p>Description: {description}</p>\r\n                            <p>Price: {price}</p>\r\n                            <p>Location: {location}</p>\r\n                            {\r\n                                isAuthor ? (\r\n                                    <>\r\n                                        <Button>\r\n                                            <Link to={`/posts/edit-post/${_id}`}>Edit</Link>\r\n                                        </Button>\r\n                                        <Button onClick={(event) => { deletePostConfirm(token, _id) }}>Delete Post\r\n                                        </Button>\r\n                \r\n                                    </>\r\n                                ) : (\r\n                                    <Button>\r\n                                    <Link to={`/posts/${_id}`}>View Post</Link>\r\n                                    </Button>\r\n                                )\r\n                            }\r\n                        </div>\r\n                    )\r\n                })\r\n                \r\n\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\nexport default Posts;"],"mappings":"4ZAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,UAAU,KAAQ,YAAY,CACvC,MAAOC,OAAM,KAAM,UAAU,CAC7B,OAASC,MAAM,KAAQ,mBAAmB,8IAE1C,GAAMC,MAAK,CAAG,QAARA,MAAK,MAAyB,IAAnBC,MAAK,MAALA,KAAK,CAAEC,KAAK,MAALA,KAAK,CACzB,cAA0CP,QAAQ,CAACM,KAAK,CAAC,wCAAlDE,aAAa,eAAEC,gBAAgB,eAEtC,GAAMC,kBAAiB,6FAAG,iBAAOH,KAAK,CAAEI,cAAc,gIAClDC,MAAM,CAACC,OAAO,CAAC,4CAA4C,CAAC,CAAC,sBACvCX,WAAU,CAACK,KAAK,CAAEI,cAAc,CAAC,QAAjDG,OAAO,eACbF,MAAM,CAACG,KAAK,CAAC,qCAAqC,CAAC,CAAC,gCAC7CD,OAAO,wDACjB,kBALKJ,kBAAiB,iDAKtB,CACL;AACA;AACI,mBACI,aAAK,EAAE,CAAC,mBAAmB,wBACvB,oCACI,sCAAuB,cACvB,KAAC,MAAM,EAAC,KAAK,CAAGJ,KAAM,CAAC,gBAAgB,CAAGG,gBAAiB,EAAU,GACnE,CAENO,KAAK,CAACC,OAAO,CAACX,KAAK,CAAC,EAChBE,aAAa,CAACU,GAAG,CAAC,SAACC,IAAI,CAAK,CACxB,GAAQC,YAAW,CAA4CD,IAAI,CAA3DC,WAAW,CAAEC,QAAQ,CAAkCF,IAAI,CAA9CE,QAAQ,CAAEC,KAAK,CAA2BH,IAAI,CAApCG,KAAK,CAAEC,KAAK,CAAoBJ,IAAI,CAA7BI,KAAK,CAAEC,GAAG,CAAeL,IAAI,CAAtBK,GAAG,CAAEC,QAAQ,CAAKN,IAAI,CAAjBM,QAAQ,CAC1D,mBACI,aAAe,KAAK,CAAC,kBAAkB,CAAC,EAAE,CAAC,OAAO,wBAC9C,WAAI,KAAK,CAAC,WAAW,UAAEF,KAAK,EAAM,cAClC,qCAAiBH,WAAW,GAAK,cACjC,+BAAWE,KAAK,GAAK,cACrB,kCAAcD,QAAQ,GAAK,CAEvBI,QAAQ,cACJ,wCACI,KAAC,MAAM,wBACH,KAAC,IAAI,EAAC,EAAE,4BAAsBD,GAAG,CAAG,kBAAY,EAC3C,cACT,KAAC,MAAM,EAAC,OAAO,CAAE,iBAACE,KAAK,CAAK,CAAEhB,iBAAiB,CAACH,KAAK,CAAEiB,GAAG,CAAC,CAAC,CAAE,yBACrD,GAEV,cAEH,KAAC,MAAM,wBACP,KAAC,IAAI,EAAC,EAAE,kBAAYA,GAAG,CAAG,uBAAiB,EAE9C,GAnBCA,GAAG,CAqBP,CAEd,CAAC,CAAC,GAIJ,CAEd,CAAC,CAKD,cAAenB,MAAK"},"metadata":{},"sourceType":"module"}