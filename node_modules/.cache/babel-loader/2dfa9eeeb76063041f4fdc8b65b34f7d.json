{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Andy/Documents/GitHub/Stranger Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Andy/Documents/GitHub/Stranger Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var baseURL='https://strangers-things.herokuapp.com/api/2207-FTB-ET-WEB-PT';export var getPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(token){var response,results;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(baseURL,\"/posts\"),{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:results=_context.sent;return _context.abrupt(\"return\",results);case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log('error getting all posts');case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function getPosts(_x){return _ref.apply(this,arguments);};}();export var registerUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(username,password){var response,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"\".concat(baseURL,\"/users/register\"),{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({user:{username:username,password:password}})});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:result=_context2.sent;return _context2.abrupt(\"return\",result);case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log('error registering user');case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function registerUser(_x2,_x3){return _ref2.apply(this,arguments);};}();export var loginUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(username,password){var response,result;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(\"\".concat(baseURL,\"/users/login\"),{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({user:{username:username,password:password}})});case 3:response=_context3.sent;_context3.next=6;return response.json();case 6:result=_context3.sent;return _context3.abrupt(\"return\",result);case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);console.error('There was an error loggin in the user');case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[0,10]]);}));return function loginUser(_x4,_x5){return _ref3.apply(this,arguments);};}();export var getUserDetails=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(token){var response,result;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return fetch(\"\".concat(baseURL,\"/users/me\"),{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 3:response=_context4.sent;_context4.next=6;return response.json();case 6:result=_context4.sent;return _context4.abrupt(\"return\",result);case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](0);console.log('error getting users details');case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[0,10]]);}));return function getUserDetails(_x6){return _ref4.apply(this,arguments);};}();export var createPost=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(token,_ref5){var title,description,price,location,willDeliver,response,result;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:title=_ref5.title,description=_ref5.description,price=_ref5.price,location=_ref5.location,willDeliver=_ref5.willDeliver;_context5.prev=1;_context5.next=4;return fetch(\"\".concat(baseURL,\"/posts\"),{method:\"POST\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({post:{title:title,description:description,price:price,location:location,willDeliver:willDeliver}})});case 4:response=_context5.sent;_context5.next=7;return response.json();case 7:result=_context5.sent;return _context5.abrupt(\"return\",result);case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](1);console.error('There was an error with creating a new post');case 14:case\"end\":return _context5.stop();}}},_callee5,null,[[1,11]]);}));return function createPost(_x7,_x8){return _ref6.apply(this,arguments);};}();export var deletePost=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(token,postID){var response,data;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:console.log(postID);_context6.prev=1;_context6.next=4;return fetch(\"\".concat(baseURL,\"/posts/\").concat(postID),{method:\"DELETE\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 4:response=_context6.sent;_context6.next=7;return response.json();case 7:data=_context6.sent;return _context6.abrupt(\"return\",data);case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](1);console.log(error);console.log('error deleting post');case 15:case\"end\":return _context6.stop();}}},_callee6,null,[[1,11]]);}));return function deletePost(_x9,_x10){return _ref7.apply(this,arguments);};}();export var updatePost=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(_ref8){var token,title,description,price,location,willDeliver,_id,response,result;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:token=_ref8.token,title=_ref8.title,description=_ref8.description,price=_ref8.price,location=_ref8.location,willDeliver=_ref8.willDeliver,_id=_ref8._id;_context7.prev=1;_context7.next=4;return fetch(\"\".concat(baseURL,\"/posts/\").concat(postID),{method:\"PATCH\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({post:{title:title,description:description,price:price,location:location,willDeliver:willDeliver}})});case 4:response=_context7.sent;_context7.next=7;return response.json();case 7:result=_context7.sent;return _context7.abrupt(\"return\",result);case 11:_context7.prev=11;_context7.t0=_context7[\"catch\"](1);console.error('There was error updating post');case 14:case\"end\":return _context7.stop();}}},_callee7,null,[[1,11]]);}));return function updatePost(_x11){return _ref9.apply(this,arguments);};}();export var createMessage=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(_ref10){var postID,token,message,respons;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:postID=_ref10.postID,token=_ref10.token,message=_ref10.message;_context8.prev=1;_context8.next=4;return fetch(\"\".concat(baseURL,\"/posts/\").concat(postID,\"/messages\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({message:message})});case 4:respons=_context8.sent;_context8.next=10;break;case 7:_context8.prev=7;_context8.t0=_context8[\"catch\"](1);console.error('There was an error creating the message');case 10:case\"end\":return _context8.stop();}}},_callee8,null,[[1,7]]);}));return function createMessage(_x12){return _ref11.apply(this,arguments);};}();","map":{"version":3,"names":["baseURL","getPosts","token","fetch","headers","response","json","results","console","log","registerUser","username","password","method","body","JSON","stringify","user","result","loginUser","error","getUserDetails","createPost","title","description","price","location","willDeliver","post","deletePost","postID","data","updatePost","_id","createMessage","message","respons"],"sources":["C:/Users/Andy/Documents/GitHub/Stranger Things/src/api/api.js"],"sourcesContent":["const baseURL = 'https://strangers-things.herokuapp.com/api/2207-FTB-ET-WEB-PT'\r\n\r\nexport const getPosts = async(token) => {\r\n  try {\r\n    const response = await fetch(`${baseURL}/posts`, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n    const results = await response.json();\r\n    return results;\r\n  } catch(error) {\r\n    console.log('error getting all posts')\r\n  }\r\n}\r\n\r\n\r\nexport const registerUser = async (username, password) => {\r\n  try {\r\n    const response = await fetch(`${baseURL}/users/register`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        user: {\r\n          username: username,\r\n          password: password\r\n        }\r\n      })\r\n    })\r\n    const result = await response.json();\r\n    return result;\r\n  } catch(error) {\r\n    console.log('error registering user')\r\n  }\r\n}\r\n\r\nexport const loginUser = async (username, password) => {\r\n  try {\r\n    const response = await fetch(`${baseURL}/users/login`,{\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        user: {\r\n          username,\r\n          password\r\n        }\r\n      })\r\n    })\r\n    \r\n    const result = await response.json();\r\n    \r\n    return result;\r\n    \r\n  } catch(error) {\r\n    console.error('There was an error loggin in the user')\r\n  }\r\n}\r\n\r\n\r\nexport const getUserDetails = async (token) => {\r\n  try {\r\n    const response = await fetch(`${baseURL}/users/me`, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`\r\n      },\r\n    })\r\n    \r\n    const result = await response.json();\r\n    return result;\r\n    \r\n  } catch(ex) {\r\n    console.log('error getting users details')\r\n  }\r\n}\r\n\r\n\r\nexport const createPost = async (token, {title, description, price, location, willDeliver})=> {\r\n  try {\r\n    const response = await fetch(`${baseURL}/posts`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`\r\n      },\r\n      body: JSON.stringify({\r\n        post: {\r\n          title,\r\n          description,\r\n          price,\r\n          location,\r\n          willDeliver\r\n        }\r\n      })\r\n    })\r\n    \r\n    const result = await response.json();\r\n    return result;\r\n  } catch(error) {\r\n    console.error('There was an error with creating a new post')\r\n  }\r\n}\r\n\r\nexport const deletePost = async (token, postID) => {\r\n  console.log(postID)\r\n  try{\r\n    const response = await fetch(`${baseURL}/posts/${postID}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n})\r\n    \r\n    const data = await response.json();\r\n    return data;\r\n  } catch(ex) {\r\n    console.log(error)\r\n    console.log('error deleting post')\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\nexport const updatePost = async ({token, title, description, price, location, willDeliver, _id})=> {\r\n  try {\r\n    const response = await fetch(`${baseURL}/posts/${postID}`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`\r\n      },\r\n      body: JSON.stringify({\r\n        post: {\r\n          title,\r\n          description,\r\n          price,\r\n          location,\r\n          willDeliver\r\n        }\r\n      })\r\n    })\r\n    \r\n    const result = await response.json();\r\n    return result;  \r\n  } catch(error) {\r\n    console.error('There was error updating post')\r\n  }\r\n}\r\n\r\n\r\nexport const createMessage = async ({postID, token, message}) => {\r\n  try {\r\n    const respons = await fetch(`${baseURL}/posts/${postID}/messages`, {\r\n     method: 'POST',\r\n     headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`\r\n     },\r\n     body: JSON.stringify({\r\n      message\r\n     })\r\n    })\r\n  } catch(error) {\r\n    console.error('There was an error creating the message')\r\n  }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}