{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Andy/Documents/GitHub/Stranger Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Andy/Documents/GitHub/Stranger Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Andy/Documents/GitHub/Stranger Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import ReactDOM from'react-dom/client';import{Route,BrowserRouter,Routes,useNavigate}from'react-router-dom';import{Home,Register,Login}from'./components';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),token=_useState4[0],setToken=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];var navigate=useNavigate();function logout(){window.localStorage.removeItem('token');setToken('');setUser({});}function fetchPosts(){return _fetchPosts.apply(this,arguments);}function _fetchPosts(){_fetchPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var results;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getPosts(token);case 2:results=_context.sent;setPosts(results.data.posts);case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchPosts.apply(this,arguments);}function getMe(){return _getMe.apply(this,arguments);}function _getMe(){_getMe=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var storedToken,results;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:storedToken=window.localStorage.getItem('token');if(token){_context2.next=4;break;}if(storedToken){setToken(storedToken);}return _context2.abrupt(\"return\");case 4:_context2.next=6;return getUserDetails(token);case 6:results=_context2.sent;console.log(results);if(results.success){setUser(results.data);}else{console.log(results.error.message);}case 9:case\"end\":return _context2.stop();}}},_callee2);}));return _getMe.apply(this,arguments);}useEffect(function(){fetchPosts();},[token]);useEffect(function(){getMe();},[token]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{logout:logout,token:token}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/posts\",element:/*#__PURE__*/_jsx(Posts,{token:token,posts:posts,fetchPosts:fetchPosts})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/posts/create-post\",element:/*#__PURE__*/_jsx(CreatePost,{token:token,fetchPosts:fetchPosts,navigate:navigate})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/posts/edit-post/:postID\",element:/*#__PURE__*/_jsx(EditPost,{posts:posts,token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/posts/:postID\",element:/*#__PURE__*/_jsx(SinglePostView,{posts:posts,token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{user:user,token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/singlePostView\",element:/*#__PURE__*/_jsx(SinglePostView,{user:user,token:token,posts:posts})}),/*#__PURE__*/_jsx(Route,{path:\"/searchItems\",element:/*#__PURE__*/_jsx(SearchItems,{posts:posts})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{setToken:setToken,token:token,navigate:navigate})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{setToken:setToken,navigate:navigate})})]})]});};var container=document.querySelector('#container');var root=ReactDOM.createRoot(container);root.render(/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(App,{})}));","map":{"version":3,"names":["React","useState","useEffect","ReactDOM","Route","BrowserRouter","Routes","useNavigate","Home","Register","Login","App","posts","setPosts","token","setToken","user","setUser","navigate","logout","window","localStorage","removeItem","fetchPosts","getPosts","results","data","getMe","storedToken","getItem","getUserDetails","console","log","success","error","message","container","document","querySelector","root","createRoot","render"],"sources":["C:/Users/Andy/Documents/GitHub/Stranger Things/src/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport { Route, BrowserRouter, Routes, useNavigate } from 'react-router-dom';\r\nimport {\r\n    Home,\r\n    Register,\r\n    Login,\r\n\r\n} from './components';\r\n\r\nconst App = () => {\r\n  const [posts, setPosts] = useState([]);\r\n  const [token, setToken] = useState('');\r\n  const [user, setUser] = useState({});\r\n  \r\n  const navigate = useNavigate();\r\n\r\n  function logout() {\r\n      window.localStorage.removeItem('token');\r\n      setToken('');\r\n      setUser({});\r\n  }\r\n\r\n  async function fetchPosts() {\r\n      const results = await getPosts(token)\r\n      setPosts(results.data.posts);\r\n  }\r\n\r\n  async function getMe() {\r\n      const storedToken = window.localStorage.getItem('token');\r\n\r\n      if (!token) {\r\n          if (storedToken) {\r\n              setToken(storedToken);\r\n          }\r\n          return;\r\n      }\r\n\r\n      const results = await getUserDetails(token)\r\n      console.log(results)\r\n      if (results.success) {\r\n          setUser(results.data);\r\n      } else {\r\n          console.log(results.error.message);\r\n      }\r\n  }\r\n\r\n  useEffect(() => {\r\n      fetchPosts()\r\n  }, [token])\r\n\r\n  useEffect(() => {\r\n      getMe();\r\n  }, [token])\r\n\r\n\r\n  return (\r\n      <div>\r\n          <Navbar logout={logout} token={token} />\r\n          <Routes>\r\n              <Route\r\n                  path='/'\r\n                  element={<Home \r\n                  />}\r\n              />\r\n              <Route\r\n                  path='/posts'\r\n                  element={<Posts\r\n                      token={token}\r\n                      posts={posts}\r\n                      fetchPosts={fetchPosts}\r\n                  />}\r\n              />\r\n              <Route\r\n                  exact path='/posts/create-post'\r\n                  element={<CreatePost\r\n                      token={token}\r\n                      fetchPosts={fetchPosts}\r\n                      navigate={navigate}\r\n                  />}\r\n              />\r\n              <Route\r\n                  exact path='/posts/edit-post/:postID'\r\n                  element={<EditPost\r\n                      posts={posts}\r\n                      token={token}\r\n                  />}\r\n              />\r\n              <Route\r\n                  path='/posts/:postID'\r\n                  element={<SinglePostView\r\n                      posts={posts}\r\n                      token={token}   \r\n                  />}\r\n              />\r\n              <Route\r\n                  path='/profile'\r\n                  element={<Profile \r\n                      user={user}\r\n                      token={token}\r\n                  />}\r\n              />\r\n              <Route\r\n                  path='/singlePostView'\r\n                  element={<SinglePostView\r\n                      user={user}\r\n                      token={token}\r\n                      posts={posts}\r\n                  />}\r\n              />\r\n              <Route\r\n                  path='/searchItems'\r\n                  element={<SearchItems\r\n                  posts={posts}\r\n                  />}\r\n              />\r\n              <Route\r\n                  path='/register'\r\n                  element={<Register\r\n                      setToken={setToken}\r\n                      token={token}\r\n                      navigate={navigate}\r\n                  />}\r\n              />\r\n              <Route\r\n                  path='/login'\r\n                  element={<Login\r\n                      setToken={setToken}\r\n                      navigate={navigate}\r\n                  />}\r\n              />\r\n          </Routes>\r\n      </div>\r\n  )\r\n}\r\n\r\nconst container = document.querySelector('#container');\r\nconst root = ReactDOM.createRoot(container);\r\nroot.render(\r\n  <BrowserRouter>\r\n      <App />\r\n  </BrowserRouter>\r\n);"],"mappings":"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"},"metadata":{},"sourceType":"module"}