{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Andy/Documents/GitHub/Stranger Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Andy/Documents/GitHub/Stranger Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Andy/Documents/GitHub/Stranger Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import ReactDOM from'react-dom/client';import{Route,BrowserRouter,Routes,useNavigate}from'react-router-dom';import{Home,Register,Login,Posts,Navbar,Search,SinglePost,Profile,EditPost,CreatePost}from'./components';import{getUserDetails,getPosts}from'./api/api';import'semantic-ui-css/semantic.min.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),posts=_useState6[0],setPosts=_useState6[1];var navigate=useNavigate();function logout(){window.localStorage.removeItem('token');setToken('');setUser({});}function fetchPosts(){return _fetchPosts.apply(this,arguments);}function _fetchPosts(){_fetchPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var results;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"here\");_context.next=3;return getPosts(token);case 3:results=_context.sent;setPosts(results.data.posts);case 5:case\"end\":return _context.stop();}}},_callee);}));return _fetchPosts.apply(this,arguments);}function getMe(){return _getMe.apply(this,arguments);}function _getMe(){_getMe=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var storedToken,results;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:storedToken=window.localStorage.getItem('token');if(token){_context2.next=4;break;}if(storedToken){setToken(storedToken);}return _context2.abrupt(\"return\");case 4:_context2.next=6;return getUserDetails(token);case 6:results=_context2.sent;console.log(results);if(results.success){setUser(results.data);}else{console.error(results.error.message);}case 9:case\"end\":return _context2.stop();}}},_callee2);}));return _getMe.apply(this,arguments);}useEffect(function(){fetchPosts();},[token]);useEffect(function(){getMe();},[token]);console.log(posts,\"app.js posts\");return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{logout:logout,token:token}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{setToken:setToken,token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{setToken:setToken})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{user:user,token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/posts\",element:/*#__PURE__*/_jsx(Posts,{token:token,posts:posts,fetchPosts:fetchPosts})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/posts/create-post\",element:/*#__PURE__*/_jsx(CreatePost,{token:token,setPosts:setPosts,navigate:navigate})}),/*#__PURE__*/_jsx(Route,{path:\"/singlePost\",element:/*#__PURE__*/_jsx(SinglePost,{user:user,token:token,posts:posts})}),/*#__PURE__*/_jsx(Route,{path:\"/posts/:postID\",element:/*#__PURE__*/_jsx(SinglePost,{posts:posts,token:token})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/posts/edit-post/:postID\",element:/*#__PURE__*/_jsx(EditPost,{posts:posts,token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/Search\",element:/*#__PURE__*/_jsx(Search,{posts:posts})})]})]});};var root=ReactDOM.createRoot(document.getElementById(\"app\"));root.render(/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(App,{})}));","map":{"version":3,"names":["React","useState","useEffect","ReactDOM","Route","BrowserRouter","Routes","useNavigate","Home","Register","Login","Posts","Navbar","Search","SinglePost","Profile","EditPost","CreatePost","getUserDetails","getPosts","App","token","setToken","user","setUser","posts","setPosts","navigate","logout","window","localStorage","removeItem","fetchPosts","console","log","results","data","getMe","storedToken","getItem","success","error","message","root","createRoot","document","getElementById","render"],"sources":["C:/Users/Andy/Documents/GitHub/Stranger Things/src/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport { Route, BrowserRouter, Routes, useNavigate } from 'react-router-dom';\r\nimport {\r\n    Home,\r\n    Register,\r\n    Login,\r\n    Posts,\r\n    Navbar,\r\n    Search,\r\n    SinglePost,\r\n    Profile,\r\n    EditPost,\r\n    CreatePost,\r\n} from './components';\r\n\r\nimport {\r\n    getUserDetails,\r\n    getPosts\r\n} from './api/api';\r\n\r\nimport 'semantic-ui-css/semantic.min.css';\r\n\r\nconst App = () => {\r\n  const [token, setToken] = useState('');\r\n  const [user, setUser] = useState({});\r\n  const [posts, setPosts] = useState([]);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  function logout() {\r\n      window.localStorage.removeItem('token');\r\n      setToken('');\r\n      setUser({});\r\n  }\r\n\r\n\r\n  async function fetchPosts() {\r\n      console.log(\"here\");\r\n      const results = await getPosts(token);\r\n      setPosts(results.data.posts);\r\n  }\r\n\r\n  async function getMe() {\r\n      const storedToken = window.localStorage.getItem('token');\r\n\r\n      if (!token) {\r\n          if (storedToken) {\r\n              setToken(storedToken);\r\n          }\r\n          return;\r\n      }\r\n\r\n      const results = await getUserDetails(token)\r\n      console.log(results)\r\n      if (results.success) {\r\n          setUser(results.data);\r\n      } else {\r\n          console.error(results.error.message);\r\n      }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchPosts()\r\n}, [token])\r\n\r\nuseEffect(() => {\r\n    getMe();\r\n}, [token])\r\n\r\n console.log(posts, \"app.js posts\")\r\n  return (\r\n      <div>\r\n          <Navbar logout={logout} token={token} />\r\n          <Routes>\r\n            <Route\r\n                    path='/'\r\n                    element={<Home \r\n                    />}\r\n                />\r\n            <Route\r\n                  path='/register'\r\n                  element={<Register\r\n                      setToken={setToken}\r\n                      token={token}\r\n\r\n                  />}\r\n                />\r\n            <Route\r\n                  path='/login'\r\n                  element={<Login\r\n                      setToken={setToken}\r\n\r\n                  />}\r\n                />\r\n            <Route\r\n                    path='/profile'\r\n                    element={<Profile \r\n                        user={user}\r\n                        token={token}\r\n                    />}\r\n                />\r\n            <Route\r\n                    path='/posts'\r\n                    element={<Posts\r\n                        token={token}\r\n                        posts={posts}\r\n                        fetchPosts={fetchPosts}\r\n                    />}\r\n                />\r\n            <Route\r\n                    exact path='/posts/create-post'\r\n                    element={<CreatePost\r\n                        token={token}\r\n                        setPosts={setPosts}\r\n                        navigate={navigate}\r\n                        \r\n                    />}\r\n                />\r\n            <Route\r\n                    path='/singlePost'\r\n                    element={<SinglePost\r\n                        user={user}\r\n                        token={token}\r\n                        posts={posts}\r\n                    />}\r\n                />\r\n            <Route\r\n                    path='/posts/:postID'\r\n                    element={<SinglePost\r\n                        posts={posts}\r\n                        token={token}   \r\n                    />}\r\n                />\r\n            <Route\r\n                    exact path='/posts/edit-post/:postID'\r\n                    element={<EditPost\r\n                        posts={posts}\r\n                        token={token}\r\n                    />}\r\n                />\r\n            <Route\r\n                    path='/Search'\r\n                    element={<Search\r\n                    posts={posts}\r\n                    />}\r\n                />\r\n          </Routes>\r\n      </div>\r\n  )\r\n}\r\n\r\nconst root = ReactDOM.createRoot(document.getElementById(\"app\"));\r\nroot.render(\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  );"],"mappings":"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"},"metadata":{},"sourceType":"module"}